[General]
# 日志等级 warning, notify, info, verbose (默认: notify)
loglevel = notify
# 网络诊断
# > Internet 测试 URL
internet-test-url = http://bing.com
# > 代理测速 URL
proxy-test-url = http://www.google.com/generate_204
# > 测速超时 (s)
test-timeout = 3
# IPv6 支持
ipv6 = false
# Wi-Fi 访问
# > 允许 Wi-Fi 网络下其它设备访问
allow-wifi-access = true
# > HTTP 代理服务端口（默认 "6152"）
# wifi-access-http-port = 6152
# > SOCKS5 代理服务端口（默认 "6153"）
# wifi-access-socks5-port = 6153
# 外部控制器
external-controller-access = admin@127.0.0.1:6170
# 兼容性
# > 兼容模式（默认 "禁用"）
# compatibility-mode = 0
# > 跳过某个域名或者IP段
skip-proxy = 192.168.0.0/16, 193.168.0.0/24, 10.0.0.0/8, 172.16.0.0/12, 100.64.0.0/10, 17.0.0.0/8, 127.0.0.1, localhost, *.local
bypass-system = true
# 实验性支持
# > TLS Provider: default, secure-transport, network-framework, openssl (默认: default)
tls-provider = default
# > 启动 Network.framework（默认不启用）
network-framework = false
# 其他（请先阅读手册，除非你明确知道其含义，否则不要修改任何设置）
# > Show Reject Error Page
show-error-page-for-reject = true
# > Hijack DNS
# hijack-dns =
# > TCP Force HTTP Hosts
# force-http-engine-hosts = example.com:80
# > VIF Excluded Routes
tun-excluded-routes = 192.168.0.0/16, 10.0.0.0/8, 172.16.0.0/12
# > VIF Included Routes
tun-included-routes = 192.168.1.12/32
# DNS 服务器
dns-server = 119.29.29.29,223.5.5.5,system

[Replica]
# [抓取流量] => 过滤器
# > 隐藏 Apple 请求
hide-apple-request = true
# > 隐藏 Crashlytics 请求
hide-crashlytics-request = true
# > 隐藏 UDP 会话
hide-udp = false
# > 关键词过滤器
keyword-filter-type = (null)
keyword-filter = icloud,ocsp,logs,analytic,ads,imap,adthor,applovin,appnext,talk,dropbox,spys

[Proxy]
# 节点名称 = 协议，服务器地址，服务器端口，encrypt-method=加密协议，password=密码，obfs=混淆类型（http/tls），obfs-host=混淆地址
# 3 和 4 的 obfs 仅为示例，需服务端支持，如果不懂就别加
;1 = custom, 1.2.3.4, 443, chacha20-ietf-poly1305, password, https://raw.githubusercontent.com/ConnersHua/SSEncrypt/master/SSEncrypt.module
;2 = custom, 1.2.3.4, 443, chacha20-ietf-poly1305, password, https://raw.githubusercontent.com/ConnersHua/SSEncrypt/master/SSEncrypt.module
;3 = custom, 1.2.3.4, 443, chacha20-ietf-poly1305, password, https://raw.githubusercontent.com/ConnersHua/SSEncrypt/master/SSEncrypt.module, obfs=tls, obfs-host=yunjiasu-cdn.net
;4 = custom, 1.2.3.4, 443, chacha20-ietf-poly1305, password, https://raw.githubusercontent.com/ConnersHua/SSEncrypt/master/SSEncrypt.module, obfs=http, obfs-host=bing.com
𝐑𝐞𝐣𝐞𝐜𝐭-𝐓𝐢𝐧𝐲𝐠𝐢𝐟 = reject-tinygif
𝐑𝐞𝐣𝐞𝐜𝐭 = reject
𝐃𝐢𝐫𝐞𝐜𝐭 = direct
🎧 = http, music.desperadoj.com, 30002, username=Netease Music, password=none

[Proxy Group]
# policy-path后接服务器订阅即可
# 服务器订阅格式与[Proxy]的写法一致，注意必须是明文
# 将所有节点写到同一个订阅文件内
𝐏𝐫𝐨𝐱𝐲 = select, 𝐀𝐮𝐭𝐨, 𝐒𝐞𝐥𝐞𝐜𝐭, 𝐅𝐚𝐥𝐥𝐛𝐚𝐜𝐤
𝐀𝐮𝐭𝐨 = url-test, policy-path=https://sample.com/sample.txt, url=http://www.gstatic.com/generate_204, interval=600, tolerance=50
𝐒𝐞𝐥𝐞𝐜𝐭 = select, policy-path=https://sample.com/sample.txt
𝐅𝐚𝐥𝐥𝐛𝐚𝐜𝐤 = fallback, policy-path=https://sample.com/sample.txt, url=http://www.gstatic.com/generate_204, interval=600, tolerance=50
𝐑𝐨𝐮𝐧𝐝𝐑𝐨𝐛𝐢𝐧 = load-balance, persistent=1, policy-path=https://sample.com/sample.txt, update-interval=0
𝐏𝐚𝐲𝐏𝐚𝐥 = select, policy-path=https://sample.com/sample.txt
𝐍𝐞𝐭𝐟𝐥𝐢𝐱 = select, policy-path=https://sample.com/sample.txt
𝐓𝐢𝐤𝐓𝐨𝐤 = select, 𝐏𝐫𝐨𝐱𝐲, 𝐃𝐢𝐫𝐞𝐜𝐭
𝐏𝐨𝐫𝐧𝐇𝐮𝐛 = select, 𝐏𝐫𝐨𝐱𝐲, 𝐃𝐢𝐫𝐞𝐜𝐭
𝐘𝐨𝐮𝐓𝐮𝐛𝐞 = select, 𝐏𝐫𝐨𝐱𝐲, 𝐃𝐢𝐫𝐞𝐜𝐭
𝐓𝐞𝐥𝐞𝐠𝐫𝐚𝐦 = select, 𝐏𝐫𝐨𝐱𝐲, 𝐃𝐢𝐫𝐞𝐜𝐭
𝐍𝐞𝐭𝐞𝐚𝐬𝐞𝐌𝐮𝐬𝐢𝐜 = select, 🎧, 𝐃𝐢𝐫𝐞𝐜𝐭
𝐒𝐩𝐞𝐞𝐝𝐓𝐞𝐬𝐭 = select, 𝐏𝐫𝐨𝐱𝐲, 𝐃𝐢𝐫𝐞𝐜𝐭
𝐀𝐩𝐩𝐥𝐞 = select, 𝐃𝐢𝐫𝐞𝐜𝐭, 𝐏𝐫𝐨𝐱𝐲
𝐀𝐝 𝐁𝐥𝐨𝐜𝐤 = select, 𝐑𝐞𝐣𝐞𝐜𝐭, 𝐑𝐞𝐣𝐞𝐜𝐭-𝐓𝐢𝐧𝐲𝐠𝐢𝐟, 𝐃𝐢𝐫𝐞𝐜𝐭
𝐅𝐢𝐧𝐚𝐥 = select, 𝐏𝐫𝐨𝐱𝐲, 𝐃𝐢𝐫𝐞𝐜𝐭

[Rule]
# CUSTOM RULE
# >  淘宝比价
# IP-CIDR,203.119.144.0/23,REJECT,no-resolve
# IP-CIDR,203.119.175.0/24,REJECT,no-resolve
# IP-CIDR,106.11.162.0/24,REJECT,no-resolve
# IP-CIDR,47.102.83.0/24,REJECT,no-resolve
# Rulesets (by eHpo1 + ConnersHua）
# > Reject
RULE-SET,https://raw.githubusercontent.com/eHpo1/Rules/master/Surge4/Ruleset/Liby.list,𝐀𝐝 𝐁𝐥𝐨𝐜𝐤
RULE-SET,https://raw.githubusercontent.com/eHpo1/Rules/master/Surge4/Ruleset/Tide.list,𝐀𝐝 𝐁𝐥𝐨𝐜𝐤
# RULE-SET,https://raw.githubusercontent.com/NobyDa/Script/master/Surge/AdRuleRegex.list,𝐀𝐝 𝐁𝐥𝐨𝐜𝐤
# BlockOTA
RULE-SET,https://raw.githubusercontent.com/nzw9314/Surge/master/Ruleset/BlockOTA.list,𝐀𝐝 𝐁𝐥𝐨𝐜𝐤
# Antirevoke
RULE-SET,https://raw.githubusercontent.com/nzw9314/Surge/master/Ruleset/Antirevoke.list,𝐀𝐝 𝐁𝐥𝐨𝐜𝐤
# > TikTok
RULE-SET,https://raw.githubusercontent.com/nzw9314/Surge/master/Ruleset/TikTok.list,𝐓𝐢𝐤𝐓𝐨𝐤
# > Youtube
RULE-SET,https://raw.githubusercontent.com/eHpo1/Rules/master/Surge4/Ruleset/Sub/YouTube.list,𝐘𝐨𝐮𝐓𝐮𝐛𝐞
# > Netflix
RULE-SET,https://raw.githubusercontent.com/eHpo1/Rules/master/Surge4/Ruleset/Sub/Netflix.list,𝐍𝐞𝐭𝐟𝐥𝐢𝐱
# > PronHub
RULE-SET,https://raw.githubusercontent.com/eHpo1/Rules/master/Surge4/Ruleset/Sub/Pornhub.list,𝐏𝐨𝐫𝐧𝐇𝐮𝐛
# Telegram
RULE-SET,https://raw.githubusercontent.com/eHpo1/Rules/master/Surge4/Ruleset/Sub/Telegram.list,𝐓𝐞𝐥𝐞𝐠𝐫𝐚𝐦
# > PayPal
RULE-SET,https://raw.githubusercontent.com/eHpo1/Rules/master/Surge4/Ruleset/Sub/PayPal.list,𝐏𝐚𝐲𝐏𝐚𝐥
# > Outlook、Gmail
RULE-SET,https://raw.githubusercontent.com/nzw9314/Surge/master/Ruleset/Mail.list,𝐏𝐫𝐨𝐱𝐲
# > GoogleDrive
RULE-SET,https://raw.githubusercontent.com/nzw9314/Surge/master/Ruleset/GoogleDrive.list,𝐏𝐫𝐨𝐱𝐲
# Speedtest
RULE-SET,https://raw.githubusercontent.com/eHpo1/Rules/master/Surge4/Ruleset/Sub/Speedtest.list,𝐒𝐩𝐞𝐞𝐝𝐓𝐞𝐬𝐭
# > Apple
RULE-SET,https://raw.githubusercontent.com/eHpo1/Rules/master/Surge4/Ruleset/Apple_API.list,𝐀𝐩𝐩𝐥𝐞
RULE-SET,https://raw.githubusercontent.com/eHpo1/Rules/master/Surge4/Ruleset/Apple_CDN.list,𝐃𝐢𝐫𝐞𝐜𝐭
# > Special
RULE-SET,https://raw.githubusercontent.com/nzw9314/Surge/master/Ruleset/Special.list,𝐃𝐢𝐫𝐞𝐜𝐭
# PxxBuy
# AND,((USER-AGENT,iTunes stored*), (DOMAIN-KEYWORD,-buy.itunes.apple.com)),𝐏𝐱𝐱-𝐁𝐮𝐲
# FakeiAP
# RULE-SET,https://raw.githubusercontent.com/tinycarrot/tinycarrot/master/Surge/FakeiAP-Filter-Surge.txt,𝐈𝐀𝐏-𝐏𝐫𝐞𝐦𝐢𝐮𝐦
# >Unlock NeteaseMusic
RULE-SET,https://raw.githubusercontent.com/nzw9314/Surge/master/Ruleset/UnlockNeteaseMusic.list,𝐍𝐞𝐭𝐞𝐚𝐬𝐞𝐌𝐮𝐬𝐢𝐜
# > GlobalMedia
RULE-SET,https://raw.githubusercontent.com/eHpo1/Rules/master/Surge4/Ruleset/GlobalMedia.list,𝐏𝐫𝐨𝐱𝐲
# > Global
RULE-SET,https://raw.githubusercontent.com/eHpo1/Rules/master/Surge4/Ruleset/Global.list,𝐏𝐫𝐨𝐱𝐲
# > AsianMedia
RULE-SET,https://raw.githubusercontent.com/eHpo1/Rules/master/Surge4/Ruleset/AsianMedia.list,𝐃𝐢𝐫𝐞𝐜𝐭
# > Domestic
RULE-SET,https://raw.githubusercontent.com/eHpo1/Rules/master/Surge4/Ruleset/Domestic.list,𝐃𝐢𝐫𝐞𝐜𝐭
# Local Area Network
RULE-SET,LAN,𝐃𝐢𝐫𝐞𝐜𝐭
# GeoIP China
GEOIP,CN,𝐃𝐢𝐫𝐞𝐜𝐭
FINAL,𝐅𝐢𝐧𝐚𝐥,dns-failed

[Host]
iosapps.itunes.apple.com = script:dnspod
*.126.com = server:119.29.29.29
*.126.net = server:119.29.29.29
*.127.net = server:119.29.29.29
*.163.com = server:119.29.29.29
*.alicdn.com = server:223.5.5.5
*.aliyun.com = server:223.5.5.5
*.baidu.com = server:syslib
*.bdstatic.com = server:syslib
*.bilibili.com = server:119.29.29.29
*.jd.com = server:119.28.28.28
*.mi.com = server:119.29.29.29
*.netease.com = server:119.29.29.29
*.pcbeta.com = 120.52.19.113
*.qpic.cn = server:119.28.28.28
*.qq.com = server:119.28.28.28
*.taobao.com = server:223.6.6.6
*.tencent.com = server:119.28.28.28
*.tmall.com = server:223.6.6.6
*.weixin.com = server:119.28.28.28
*.xiaomi.com = server:119.29.29.29
cdn.pcbeta.attachment.inimc.com = 120.52.19.113
cdn.pcbeta.css.inimc.com = 120.52.19.113
cdn.pcbeta.static.inimc.com = 120.52.19.113
hdslb.com = server:119.29.29.29
# CUSTOM DNS

[URL Rewrite]
# CUSTOM URL
# > Redirect Google Service
^https?:\/\/(www.)?(g|google)\.cn https://www.google.com 302
# > TikTok Unlock & remove logo (By Choler)
(?<=_region=)CN(?=&) JP 307
(?<=&app_version=)16..(?=.?.?&) 1 307
(?<=\?version_code=)16..(?=.?.?&) 1 307

[MITM]
skip-server-cert-verify = true
hostname = *.amemv.com, *.iydsj.com, *.k.sohu.com, *.kakamobi.cn, *.kingsoft-office-service.com, *.meituan.net, *.musical.ly, *.ofo.com, *.pstatp.com, *.snssdk.com, *.tiktokv.com, *.tv.sohu.com, *.uve.weibo.com, *.ydstatic.com, 101.201.175.228, 119.18.193.135, 123.59.31.1, 154.8.131.171, 182.92.251.113, 4gimg.map.qq.com, a.apicloud.com, a.qiumibao.com, acs.m.taobao.com, act.vip.iqiyi.com, api*.futunn.com, api.21jingji.com, api.caijingmobile.com, api.chelaile.net.cn, api.daydaycook.com.cn, api.douban.com, api.gotokeep.com, api.haohaozhu.cn, api.huomao.com, api.intsig.net, api.izuiyou.com, api.jr.mi.com, api.jxedt.com, api.kkmh.com, api.m.jd.com, api.meipian.me, api.mgzf.com, api.psy-1.com, api.qbb6.com, api.rr.tv, api.smzdm.com, api.vistopia.com.cn, api.waitwaitpay.com, api.wallstreetcn.com, api.weibo.cn, api.xiachufang.com, api.yangkeduo.com, api.zhihu.com, api.zhuishushenqi.com, api-mifit*.huami.com, api-release.wuta-cam.com, app.58.com, app.api.ke.com, app.bilibili.com, app.mixcapp.com, app.poizon.com, app.variflight.com, app.wy.guahao.com, app.xinpianchang.com, app.yinxiang.com, app.zhuanzhuan.com, appapi.huazhu.com, app-api.smzdm.com, appconf.mail.163.com, appv6.55haitao.com, b.zhuishushenqi.com, business-cdn.shouji.sogou.com, c.m.163.com, cap.caocaokeji.cn, capi.mwee.cn, cdn.moji.com, cdnfile1.msstatic.com, channel.beitaichufang.com, client.mail.163.com, clientaccess.10086.cn, cms.daydaycook.com.cn, consumer.fcbox.com, creditcardapp.bankcomm.com, daoyu.sdo.com, dl.app.gtja.com, dsa-mfp.fengshows.cn, dxy.com, e.dangdang.com, easyreadfs.nosdn.127.net, g.cdn.pengpengla.com, gateway.shouqiev.com, guide-acs.m.taobao.com, gw.alicdn.com, gw.csdn.net, gw-passenger.01zhuanche.com, heic.alicdn.com, i.ys7.com, iapi.bishijie.com, iface.iqiyi.com, ih2.ireader.com, imeclient.openspeech.cn, img.jiemian.com, img01.10101111cdn.com, interface.music.163.com, ios.lantouzi.com, ios.wps.cn, jump2.bdimg.com, kaola-haitao.oss.kaolacdn.com, learn.chaoxing.com, list-app-m.i4.cn, m*.amap.com, m.client.10010.com, m.ibuscloud.com, m.tuniu.com, m.yap.yahoo.com, manga.bilibili.com, mapi.mafengwo.cn, media.qyer.com, mlife.jf365.boc.cn, mob.mddcloud.com.cn, mobi.360doc.com, mp.weixin.qq.com, mrobot.pcauto.com.cn, mrobot.pconline.com.cn, ms.jr.jd.com, msspjh.emarbox.com, news.ssp.qq.com, newsso.map.qq.com, nnapp.cloudbae.cn, open.qyer.com, p.du.163.com, pan.baidu.com, pic*.chelaile.net, pic1cdn.cmbchina.com, pocketuni.net, portal-xunyou.qingcdn.com, pss.txffp.com, r.inews.qq.com, render.alipay.com, resrelease.wuta-cam.com, restapi.iyunmai.com, richmanapi.jxedt.com, rtbapi.douyucdn.cn, s*.zdmimg.com, s.youtube.com, service.4gtv.tv, slapi.oray.net, smkmp.96225.com, snailsleep.net, ss0.bdstatic.com, ssl.kohsocialapp.qq.com, static.vuevideo.net, static1.keepcdn.com, status.boohee.com, support.you.163.com, thor.weidian.com, tieba.baidu.com, tiku.zhan.com, weibointl.api.weibo.cn, www.bodivis.com.cn, www.dandanzan.com, www.flyertea.com, www.hxeduonline.com, www.iyingdi.cn, www.tieba.com, www.youtube.com, www.zhihu.com, www.zybang.com, xyz.cnki.net, xyst.yuanfudao.com, youtubei.googleapis.com, yxyapi*.drcuiyutao.com, zhidao.baidu.com

[Script]
# > Speed up download app ios
dnspod = script-path=https://raw.githubusercontent.com/langkhach270389/Scripting/master/Surge/dnspod.js,script-update-interval=0,type=dns

# > Auto Policy
# 自动策略，在BoxJs配置
Auto-Policy = script-path=https://raw.githubusercontent.com/Peng-YM/QuanX/master/Tools/AutoPolicy/auto-policy.js,type=event,event-name=network-changed
